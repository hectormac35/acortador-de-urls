// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  // uncomment next line if you use Prisma <5.10
  // directUrl = env("DATABASE_URL_UNPOOLED")
}

model User {
  id           String   @id @default(cuid())
  name         String?
  email        String   @unique
  passwordHash String
  createdAt    DateTime @default(now())

  urls         Url[]
}

model Url {
  id        String       @id @default(cuid())
  slug      String       @unique
  target    String
  active    Boolean      @default(true)
  createdAt DateTime     @default(now())
  clicks    ClickEvent[]

  userId String
  user   User @relation(fields: [userId], references: [id])

}

model ClickEvent {
  id       String   @id @default(cuid())
  urlId    String
  url      Url      @relation(fields: [urlId], references: [id])
  ts       DateTime @default(now())
  country  String?
  device   String?
  referrer String?
}
